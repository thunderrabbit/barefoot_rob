<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>emacs &middot; Barefoot Rob</title>

    <meta name="description" content="keep expanding">

    <meta name="generator" content="Hugo 0.58.3" />
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="thunderrabbit" />
    <meta name="twitter:title" content="emacs &middot; Barefoot Rob">
    <meta name="twitter:description" content="keep expanding">

    <meta property="og:type" content="article">
    <meta property="og:title" content="emacs &middot; Barefoot Rob">
    <meta property="og:description" content="keep expanding">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">

    <link rel="stylesheet" href='https://new.robnugen.com/css/all.min.css'>
    <link rel="stylesheet" href='https://new.robnugen.com/css/barefoot_rob.css'>
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="alternate" type="application/rss+xml" title="Barefoot Rob" href='https://new.robnugen.com/index.xml' />
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="https://new.robnugen.com/">Barefoot Rob</a></h1>
            <h2 class="brand-tagline"> keep expanding </h2>
        </hgroup>

        <nav class="nav">
            <ul class="nav-list">
                
                
                
                
                <li class="nav-item">
                    <a class="pure-button" href='/'>
                        <i class="fa"></i> home
                    </a>
                </li>
                <li class="nav-item">
                    <a class="pure-button" href='https://new.robnugen.com/journal'>
                        <i class="fa"></i> journal
                    </a>
                </li>
                <li class="nav-item">
                    <a class="pure-button" href='https://new.robnugen.com/blog'>
                        <i class="fa"></i> blog
                    </a>
                </li>
                
            </ul>
        </nav>
    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                
                <h1 class="content-subhead">07 Nov 2014, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://new.robnugen.com/journal/2014/11/07/a-reasonable-way-to-insert-images/" class="post-title">A reasonable(?) way to insert images</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Rob Nugen</strong>
                            
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>##10:02 Friday 07 November 2014 JST##</p>

<p>Though I still have to copy the image names by hand, once they are in
the correct directories, I have a pretty okay way of inserting them
into my journal pages.</p>

<p>For most images, I&rsquo;ve settled on a convention of putting the main
image in a directory, and then thumbnails for the image(s) in a</p>

<pre><code class="language-thumbs/```">
For most of *those* images, I place them in ```images/yyyy/mm/```
directories for the year and month they were taken.  Images that are taken
as part of a project that lasts more than a month will get their own
directory at a deeper level, probably at ```images/project-name```.

Given that my journal entries are also in dated directories, I can
take the date of the current filename and use that to determine the
likely name of the directory in which the images for that entry are
located.

So, with this keystroke in emacs,

</code></pre>

<p>C-x !</p>

<pre><code>
I run this code in [my version of
hakyll.el](https://gist.github.com/thunderrabbit/453c1e1c4a959f113d10/50f674b040070c5d7af43f1c8ec455010b13387f)
(appropriate code snippet copied here):

    (defun hakyll-insert-image (alt-text)
      &quot;Insert an image from /images/yyyy/mm to current buffer /posts/yyyy/mm/dd/....md&quot;
      (interactive &quot;sAltText: &quot;)
      (let ((yyyymm (substring buffer-file-name 35 42)))
        (insert
         (format &quot;![%s](/images/%s/thumbs/&quot;
    	     alt-text
    	     yyyymm
    	     ))
        )
      )

This shortcut is named after the fact that markdown uses ! in its code to display an image:

</code></pre>

<p><img src="/path/to/image.png" alt="alt text" /></p>

<pre><code>
The 35 and 42 in the ```substring``` function are quite specific to my
system.  I had had a longer set of functions including ```nthcdr```,
</code></pre>

<p>split<code>,</code>concat``` (I think), and something else, so I decided
to just lobotomize it. 1% chance I&rsquo;ll put them back to make it
(vaguely) more portable sometime in the mysterious future.</p>

<p>Anyway, the 35 and 42 are designed to extract &ldquo;<sup>2014</sup>&frasl;<sub>11</sub>&rdquo; from
&ldquo;/Users/thunderrabbit/journal/posts/2014/11/07/a-reasonable-way-to-insert-images.md&rdquo;</p>

<hr />

<p>So, to insert an image, I find the image in Finder and copy the
filename and extension.</p>

<p>In emacs, after starting a journal entry (with <code>C-x j</code>), I insert
an image with <code>C-x !</code>.</p>

<p>A prompt asks for a string to use as &ldquo;alt text&rdquo; for the image, and, if
I enter &ldquo;Izuku in Shinagawa&rdquo;, the function will insert this into my
file buffer:</p>

<pre><code>![Izuku in Shinagawa](/images/2014/11/thumbs/
</code></pre>

<p>To which I append my paste buffer and &ldquo;)&rdquo; for <code>Izuku in Shinagawa 2 Nov 2014.png)</code></p>

<p>and end up with:</p>

<pre><code>![Izuku in Shinagawa](/images/2014/11/thumbs/Izuku in Shinagawa 2 Nov 2014.png)
</code></pre>

<p>Which is rendered as:</p>

<p><img src="/images/2014/11/thumbs/Izuku in Shinagawa 2 Nov 2014.png" alt="Izuku in Shinagawa" /></p>

<p><em>Then</em>, I <code>C-a</code> to the beginning of the line and type <code>C-x @</code>
 (named because @ is after ! on my keyboard), which runs the following
 macro:</p>

<pre><code>(fset 'markdown-add-real-image-to-thumb
   [?\[ ?\C-s ?\] return ?\C-k ?\C-y ?\] ?\C-y ?\C-x ?\C-x return backspace ?\C-s ?t ?h ?u ?m ?b ?s return backspace backspace backspace backspace backspace backspace backspace ?\C-a ?\C-n])
</code></pre>

<p>Thereby converting this line:</p>

<pre><code>![Izuku in Shinagawa](/images/2014/11/thumbs/Izuku in Shinagawa 2 Nov 2014.png)
</code></pre>

<p>to this:</p>

<pre><code>[![Izuku in Shinagawa](/images/2014/11/thumbs/Izuku in Shinagawa 2
Nov 2014.png)](/images/2014/11/Izuku in Shinagawa 2 Nov 2014.png)
</code></pre>

<p>Which renders as this:</p>

<p><a href="/images/2014/11/Izuku in Shinagawa 2 Nov 2014.png"><img src="/images/2014/11/thumbs/Izuku in Shinagawa 2
Nov 2014.png" alt="Izuku in Shinagawa" /></a></p>

<p>(which looks the same, but now can be clicked for a bigger image.)</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">01 Nov 2014, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://new.robnugen.com/journal/2014/11/01/hmm..-how-can-i-insert-images-easily/" class="post-title">Hmm.. how can I insert images easily?</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Rob Nugen</strong>
                            
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>##13:40 Saturday 01 November 2014 JST##</p>

<p>I&rsquo;ve installed Prelude Emacs, hoping that it will support my desire to
easily embed images in my journal entries.  To insert an image, I need to insert soemthing like this:</p>

<pre><code>![alt text](/path/to/image.png)
</code></pre>

<p>The idea is that I type some keys, in this case <code>C-x !</code> and I
interactively am asked for the alt text and then can quickly get a
list of images based on the year/month of my current journal entry, in
this case <sup>2014</sup>&frasl;<sub>11</sub>.</p>

<p>Based on <a href="https://gist.github.com/thunderrabbit/453c1e1c4a959f113d10">hakyll.el</a>, I got the first part sorted:</p>

<pre><code>(defun hakyll-insert-image (alt-text)
  &quot;Insert an image from /images/yyyy/mm to current buffer /posts/yyyy/mm/dd/....md&quot;
  (interactive &quot;sAltText: &quot;)
  (let ((current-buffer-filename (buffer-file-name)))
    (insert
     (format &quot;![%s](%s)&quot;
         alt-text
         current-buffer-filename
         ))
    )
  )
</code></pre>

<p>So instead of inserting the current buffer filename, I want to parse
the current buffer filename for <code>yyyy/mm</code> and then select a file
from <code>~/journal/images/yyyy/mm</code> and insert (part of) <em>its</em> name instead.</p>

<p>I made a <a href="https://trello.com/b/ZsZU8NFz/hakyll-robnugen-com">Trello list of things I want to do on this journal</a></p>

                    </div>
                </section>
                
                <h1 class="content-subhead">30 Oct 2014, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://new.robnugen.com/journal/2014/10/30/fixed-emacs-hakyll.el/" class="post-title">Fixed emacs hakyll.el</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">Rob Nugen</strong>
                            
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>##12:09pm Thursday 30 October 2014##</p>

<p>Well it&rsquo;s not 100% yet, but at least it&rsquo;s not ridiculously broken.</p>

<p>##12:27pm##</p>

<p>Sweet!  Now it&rsquo;s working.</p>

<p><a href="https://gist.github.com/thunderrabbit/453c1e1c4a959f113d10/2dcf93f6fa89ecd389c7901699fb26b670a78881">https://gist.github.com/thunderrabbit/453c1e1c4a959f113d10/2dcf93f6fa89ecd389c7901699fb26b670a78881</a></p>

<p>I will probably remove the &ldquo;description:&rdquo; meta data (cause I never use it), and eventually I&rsquo;d like to have default values for year, month, and date fields.</p>

<p>##14:00##</p>

<p>Oh crud; it creates the files in the incorrect directory.</p>

<p>##20:07##</p>

<p>Fixed.</p>

<p><a href="https://gist.github.com/thunderrabbit/453c1e1c4a959f113d10/88eec8d412c90c5eea5ca8ac77c732e554751006">https://gist.github.com/thunderrabbit/453c1e1c4a959f113d10/88eec8d412c90c5eea5ca8ac77c732e554751006</a></p>

                    </div>
                </section>
                
            </div>
            
<div class="pagination">
  <nav role="pagination" class="post-list-pagination">
      
      <a href="/tags/emacs/" class="post-list-pagination-item pure-button post-list-pagination-item-prev">
        <i class="fa fa-angle-double-left"></i>&nbsp;Newer
      </a>
      
    <span class="post-list-pagination-item post-list-pagination-item-current">Page 2 of 2</span>
    
  </nav>
</div>


            <div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>Powered by <a class="hugo" href="https://gohugo.io/" target="_blank">hugo</a></li>
        </ul>
    </div>
</div>
<script src='https://new.robnugen.com/js/all.min.js'></script>

        </div>
    </div>
</div>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', '', 'auto');
ga('send', 'pageview');

</script>

</body>
</html>
